INFO:     Will watch for changes in these directories: ['/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend']
INFO:     Uvicorn running on http://0.0.0.0:5002 (Press CTRL+C to quit)
INFO:     Started reloader process [18940] using WatchFiles

======================================================================
üîç VALIDANDO VARI√ÅVEIS DE AMBIENTE...
======================================================================

‚úÖ Vari√°veis obrigat√≥rias: OK

‚ÑπÔ∏è  Vari√°veis opcionais ausentes (funcionalidades limitadas):
  ‚ÑπÔ∏è  UNSPLASH_ACCESS_KEY: Unsplash API for avatars (optional, will be skipped)
  ‚ÑπÔ∏è  REDIS_URL: Redis connection string (optional, will be skipped)
  ‚ÑπÔ∏è  SENTRY_DSN: Sentry error tracking DSN (optional, will be skipped)

‚öôÔ∏è  Configura√ß√µes: Valores padr√£o aplicados

======================================================================
‚úÖ VALIDA√á√ÉO CONCLU√çDA COM SUCESSO!
======================================================================
  üåç Ambiente: development
  üóÑÔ∏è  Database: ep-steep-wildflower-acg1m9zm-pooler.sa-east-1.aws.neon.tech
  ü§ñ Anthropic API: Configurada
  üîê Session Secret: ‚úì
======================================================================

{"text": "Logger initialized\n", "record": {"elapsed": {"repr": "0:00:00.016310", "seconds": 0.01631}, "exception": null, "extra": {"environment": "development", "level": "INFO", "format": "json", "production": false}, "file": {"name": "logger.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/logger.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 159, "message": "Logger initialized", "module": "logger", "name": "logger", "process": {"id": 18944, "name": "SpawnProcess-1"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:39:59.404436-03:00", "timestamp": 1762828799.404436}}}
Process SpawnProcess-1:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/importlib/__init__.py", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 568, in <module>
    async def get_global_metrics(user_id: str = Depends(require_superadmin)):
                                                ^^^^^^^
NameError: name 'Depends' is not defined
[CloneRegistry] Discovering seed clones...
[CloneRegistry] Registered SEED clone: Al Ries (5 stories)
[CloneRegistry] Registered SEED clone: Ann Handley (5 stories)
[CloneRegistry] Registered SEED clone: Claude Hopkins (5 stories)
[CloneRegistry] Registered SEED clone: Dan Kennedy (5 stories)
[CloneRegistry] Registered SEED clone: Daniel Kahneman (5 stories)
[CloneRegistry] Registered SEED clone: David Aaker (5 stories)
[CloneRegistry] Registered SEED clone: David Ogilvy (5 stories)
[CloneRegistry] Registered SEED clone: Donald Miller (5 stories)
[CloneRegistry] Registered SEED clone: Drayton Bird (5 stories)
[CloneRegistry] Registered SEED clone: Eugene Schwartz (5 stories)
[CloneRegistry] Registered SEED clone: Gary Vaynerchuk (5 stories)
[CloneRegistry] Registered SEED clone: Jay Abraham (5 stories)
[CloneRegistry] Registered SEED clone: Jay Levinson (5 stories)
[CloneRegistry] Registered SEED clone: Neil Patel (5 stories)
[CloneRegistry] Registered SEED clone: Philip Kotler (5 stories)
[CloneRegistry] Registered SEED clone: Robert Cialdini (5 stories)
[CloneRegistry] Registered SEED clone: Seth Godin (5 stories)
[CloneRegistry] Registered SEED clone: Simon Sinek (5 stories)
[CloneRegistry] Discovering custom auto-generated clones...
[CORS] Allowed origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5000', 'http://127.0.0.1:5000']
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...

======================================================================
üîç VALIDANDO VARI√ÅVEIS DE AMBIENTE...
======================================================================

‚úÖ Vari√°veis obrigat√≥rias: OK

‚ÑπÔ∏è  Vari√°veis opcionais ausentes (funcionalidades limitadas):
  ‚ÑπÔ∏è  UNSPLASH_ACCESS_KEY: Unsplash API for avatars (optional, will be skipped)
  ‚ÑπÔ∏è  REDIS_URL: Redis connection string (optional, will be skipped)
  ‚ÑπÔ∏è  SENTRY_DSN: Sentry error tracking DSN (optional, will be skipped)

‚öôÔ∏è  Configura√ß√µes: Valores padr√£o aplicados

======================================================================
‚úÖ VALIDA√á√ÉO CONCLU√çDA COM SUCESSO!
======================================================================
  üåç Ambiente: development
  üóÑÔ∏è  Database: ep-steep-wildflower-acg1m9zm-pooler.sa-east-1.aws.neon.tech
  ü§ñ Anthropic API: Configurada
  üîê Session Secret: ‚úì
======================================================================

{"text": "Logger initialized\n", "record": {"elapsed": {"repr": "0:00:00.012116", "seconds": 0.012116}, "exception": null, "extra": {"environment": "development", "level": "INFO", "format": "json", "production": false}, "file": {"name": "logger.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/logger.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 159, "message": "Logger initialized", "module": "logger", "name": "logger", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:33.597749-03:00", "timestamp": 1762828833.597749}}}
INFO:     Started server process [19055]
INFO:     Waiting for application startup.
[CloneRegistry] Discovering seed clones...
[CloneRegistry] Registered SEED clone: Al Ries (5 stories)
[CloneRegistry] Registered SEED clone: Ann Handley (5 stories)
[CloneRegistry] Registered SEED clone: Claude Hopkins (5 stories)
[CloneRegistry] Registered SEED clone: Dan Kennedy (5 stories)
[CloneRegistry] Registered SEED clone: Daniel Kahneman (5 stories)
[CloneRegistry] Registered SEED clone: David Aaker (5 stories)
[CloneRegistry] Registered SEED clone: David Ogilvy (5 stories)
[CloneRegistry] Registered SEED clone: Donald Miller (5 stories)
[CloneRegistry] Registered SEED clone: Drayton Bird (5 stories)
[CloneRegistry] Registered SEED clone: Eugene Schwartz (5 stories)
[CloneRegistry] Registered SEED clone: Gary Vaynerchuk (5 stories)
[CloneRegistry] Registered SEED clone: Jay Abraham (5 stories)
[CloneRegistry] Registered SEED clone: Jay Levinson (5 stories)
[CloneRegistry] Registered SEED clone: Neil Patel (5 stories)
[CloneRegistry] Registered SEED clone: Philip Kotler (5 stories)
[CloneRegistry] Registered SEED clone: Robert Cialdini (5 stories)
[CloneRegistry] Registered SEED clone: Seth Godin (5 stories)
[CloneRegistry] Registered SEED clone: Simon Sinek (5 stories)
[CloneRegistry] Discovering custom auto-generated clones...
[CORS] Allowed origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5000', 'http://127.0.0.1:5000']
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.316228", "seconds": 0.316228}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 104, "message": "Initializing database connection pool", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:33.901861-03:00", "timestamp": 1762828833.901861}}}
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.316454", "seconds": 0.316454}, "exception": null, "extra": {"min_size": 5, "max_size": 20, "max_queries": 5000}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 52, "message": "Initializing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:33.902087-03:00", "timestamp": 1762828833.902087}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.743134", "seconds": 0.743134}, "exception": null, "extra": {"min_size": 5, "max_size": 20}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Database pool initialized successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:34.328767-03:00", "timestamp": 1762828834.328767}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.743401", "seconds": 0.743401}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 106, "message": "Database pool initialized successfully", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:34.329034-03:00", "timestamp": 1762828834.329034}}}
{"text": "Initializing cache manager\n", "record": {"elapsed": {"repr": "0:00:00.743507", "seconds": 0.743507}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 109, "message": "Initializing cache manager", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:34.329140-03:00", "timestamp": 1762828834.32914}}}
{"text": "Using in-memory cache (Redis not configured)\n", "record": {"elapsed": {"repr": "0:00:00.743612", "seconds": 0.743612}, "exception": null, "extra": {}, "file": {"name": "cache.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/cache.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Using in-memory cache (Redis not configured)", "module": "cache", "name": "cache", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:34.329245-03:00", "timestamp": 1762828834.329245}}}
{"text": "Cache manager initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.743699", "seconds": 0.743699}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Cache manager initialized successfully", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:34.329332-03:00", "timestamp": 1762828834.329332}}}
{"text": "Initializing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:00.743772", "seconds": 0.743772}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 114, "message": "Initializing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:34.329405-03:00", "timestamp": 1762828834.329405}}}
[PostgresStorage] Connection pool initialized
[Startup] Seed experts loaded from CloneRegistry. PostgreSQL ready for custom experts.
{"text": "PostgreSQL storage initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.964527", "seconds": 0.964527}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 116, "message": "PostgreSQL storage initialized successfully", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:40:34.550160-03:00", "timestamp": 1762828834.55016}}}
INFO:     Application startup complete.
INFO:     127.0.0.1:61210 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61217 - "POST /api/auth/login HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:61222 - "POST /api/auth/login HTTP/1.1" 401 Unauthorized
[ENRICHMENT STATUS] Fetching for user_id: 48bb3e53-bfca-4298-bab5-1627ca216739
INFO:     127.0.0.1:61262 - "GET /api/auth/me?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61261 - "GET /api/persona/enrichment-status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61280 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:61282 - "POST /api/audit/log HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 390, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 289, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 771, in create_audit_log
    log_id = await storage.create_audit_log(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/storage.py", line 1536, in create_audit_log
    await conn.execute("""
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 352, in execute
    _, status, _ = await self._execute(
                   ^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1864, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1961, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 2012, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column "metadata" of relation "audit_logs" does not exist
INFO:     127.0.0.1:61280 - "GET /api/auth/me?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEBUG] Getting experts, category filter: None
INFO:     127.0.0.1:61280 - "GET /api/onboarding/status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEDUP] SEED experts: 18, DB experts: 1, Unique DB: 1
INFO:     127.0.0.1:61288 - "GET /api/experts HTTP/1.1" 200 OK
{"text": "Fetching persona for user_id: {user_id}\n", "record": {"elapsed": {"repr": "0:02:25.230198", "seconds": 145.230198}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "get_current_persona", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 3675, "message": "Fetching persona for user_id: {user_id}", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:42:58.815831-03:00", "timestamp": 1762828978.815831}}}
INFO:     127.0.0.1:61280 - "GET /api/persona/current?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61300 - "GET /api/audit/logs?user_id=48bb3e53-bfca-4298-bab5-1627ca216739&limit=50&offset=0 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 390, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 289, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 790, in get_audit_logs
    logs = await storage.get_audit_logs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/storage.py", line 1592, in get_audit_logs
    rows = await conn.fetch(query, *params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 690, in fetch
    return await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1864, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1961, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 2012, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column "action" does not exist
INFO:     127.0.0.1:61302 - "GET /api/invites/my-codes?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[ENRICHMENT STATUS] Fetching for user_id: 48bb3e53-bfca-4298-bab5-1627ca216739
INFO:     127.0.0.1:61378 - "GET /api/auth/me?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61377 - "GET /api/persona/enrichment-status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
{"text": "Fetching persona for user_id: {user_id}\n", "record": {"elapsed": {"repr": "0:05:08.223227", "seconds": 308.223227}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "get_current_persona", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 3675, "message": "Fetching persona for user_id: {user_id}", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:45:41.808860-03:00", "timestamp": 1762829141.80886}}}
[DEBUG] Getting experts, category filter: None
INFO:     127.0.0.1:61378 - "GET /api/onboarding/status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61377 - "GET /api/persona/current?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEDUP] SEED experts: 18, DB experts: 1, Unique DB: 1
INFO:     127.0.0.1:61382 - "GET /api/experts HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
{"text": "Closing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:06:02.257541", "seconds": 362.257541}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Closing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:35.843174-03:00", "timestamp": 1762829195.843174}}}
[PostgresStorage] Connection pool closed
{"text": "PostgreSQL storage closed successfully\n", "record": {"elapsed": {"repr": "0:06:02.314885", "seconds": 362.314885}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 129, "message": "PostgreSQL storage closed successfully", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:35.900518-03:00", "timestamp": 1762829195.900518}}}
{"text": "Closing cache manager\n", "record": {"elapsed": {"repr": "0:06:02.315439", "seconds": 362.315439}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 132, "message": "Closing cache manager", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:35.901072-03:00", "timestamp": 1762829195.901072}}}
{"text": "Cache manager closed successfully\n", "record": {"elapsed": {"repr": "0:06:02.315856", "seconds": 362.315856}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 134, "message": "Cache manager closed successfully", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:35.901489-03:00", "timestamp": 1762829195.901489}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:06:02.315957", "seconds": 362.315957}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 137, "message": "Closing database connection pool", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:35.901590-03:00", "timestamp": 1762829195.90159}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:06:02.316514", "seconds": 362.316514}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Closing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:35.902147-03:00", "timestamp": 1762829195.902147}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:06:02.317361", "seconds": 362.317361}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 98, "message": "Database pool closed successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:35.902994-03:00", "timestamp": 1762829195.902994}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:06:02.317503", "seconds": 362.317503}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 139, "message": "Database pool closed successfully", "module": "main", "name": "main", "process": {"id": 19055, "name": "SpawnProcess-2"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:35.903136-03:00", "timestamp": 1762829195.903136}}}
INFO:     Application shutdown complete.
INFO:     Finished server process [19055]

======================================================================
üîç VALIDANDO VARI√ÅVEIS DE AMBIENTE...
======================================================================

‚úÖ Vari√°veis obrigat√≥rias: OK

‚ÑπÔ∏è  Vari√°veis opcionais ausentes (funcionalidades limitadas):
  ‚ÑπÔ∏è  UNSPLASH_ACCESS_KEY: Unsplash API for avatars (optional, will be skipped)
  ‚ÑπÔ∏è  REDIS_URL: Redis connection string (optional, will be skipped)
  ‚ÑπÔ∏è  SENTRY_DSN: Sentry error tracking DSN (optional, will be skipped)

‚öôÔ∏è  Configura√ß√µes: Valores padr√£o aplicados

======================================================================
‚úÖ VALIDA√á√ÉO CONCLU√çDA COM SUCESSO!
======================================================================
  üåç Ambiente: development
  üóÑÔ∏è  Database: ep-steep-wildflower-acg1m9zm-pooler.sa-east-1.aws.neon.tech
  ü§ñ Anthropic API: Configurada
  üîê Session Secret: ‚úì
======================================================================

{"text": "Logger initialized\n", "record": {"elapsed": {"repr": "0:00:00.014833", "seconds": 0.014833}, "exception": null, "extra": {"environment": "development", "level": "INFO", "format": "json", "production": false}, "file": {"name": "logger.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/logger.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 159, "message": "Logger initialized", "module": "logger", "name": "logger", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.188613-03:00", "timestamp": 1762829197.188613}}}
INFO:     Started server process [19524]
INFO:     Waiting for application startup.
[CloneRegistry] Discovering seed clones...
[CloneRegistry] Registered SEED clone: Al Ries (5 stories)
[CloneRegistry] Registered SEED clone: Ann Handley (5 stories)
[CloneRegistry] Registered SEED clone: Claude Hopkins (5 stories)
[CloneRegistry] Registered SEED clone: Dan Kennedy (5 stories)
[CloneRegistry] Registered SEED clone: Daniel Kahneman (5 stories)
[CloneRegistry] Registered SEED clone: David Aaker (5 stories)
[CloneRegistry] Registered SEED clone: David Ogilvy (5 stories)
[CloneRegistry] Registered SEED clone: Donald Miller (5 stories)
[CloneRegistry] Registered SEED clone: Drayton Bird (5 stories)
[CloneRegistry] Registered SEED clone: Eugene Schwartz (5 stories)
[CloneRegistry] Registered SEED clone: Gary Vaynerchuk (5 stories)
[CloneRegistry] Registered SEED clone: Jay Abraham (5 stories)
[CloneRegistry] Registered SEED clone: Jay Levinson (5 stories)
[CloneRegistry] Registered SEED clone: Neil Patel (5 stories)
[CloneRegistry] Registered SEED clone: Philip Kotler (5 stories)
[CloneRegistry] Registered SEED clone: Robert Cialdini (5 stories)
[CloneRegistry] Registered SEED clone: Seth Godin (5 stories)
[CloneRegistry] Registered SEED clone: Simon Sinek (5 stories)
[CloneRegistry] Discovering custom auto-generated clones...
[CORS] Allowed origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5000', 'http://127.0.0.1:5000']
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.297839", "seconds": 0.297839}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 104, "message": "Initializing database connection pool", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.471619-03:00", "timestamp": 1762829197.471619}}}
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.298115", "seconds": 0.298115}, "exception": null, "extra": {"min_size": 5, "max_size": 20, "max_queries": 5000}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 52, "message": "Initializing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.471895-03:00", "timestamp": 1762829197.471895}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.586666", "seconds": 0.586666}, "exception": null, "extra": {"min_size": 5, "max_size": 20}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Database pool initialized successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.760446-03:00", "timestamp": 1762829197.760446}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.587046", "seconds": 0.587046}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 106, "message": "Database pool initialized successfully", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.760826-03:00", "timestamp": 1762829197.760826}}}
{"text": "Initializing cache manager\n", "record": {"elapsed": {"repr": "0:00:00.587200", "seconds": 0.5872}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 109, "message": "Initializing cache manager", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.760980-03:00", "timestamp": 1762829197.76098}}}
{"text": "Using in-memory cache (Redis not configured)\n", "record": {"elapsed": {"repr": "0:00:00.587700", "seconds": 0.5877}, "exception": null, "extra": {}, "file": {"name": "cache.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/cache.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Using in-memory cache (Redis not configured)", "module": "cache", "name": "cache", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.761480-03:00", "timestamp": 1762829197.76148}}}
{"text": "Cache manager initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.587806", "seconds": 0.587806}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Cache manager initialized successfully", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.761586-03:00", "timestamp": 1762829197.761586}}}
{"text": "Initializing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:00.587888", "seconds": 0.587888}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 114, "message": "Initializing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.761668-03:00", "timestamp": 1762829197.761668}}}
[PostgresStorage] Connection pool initialized
[Startup] Seed experts loaded from CloneRegistry. PostgreSQL ready for custom experts.
{"text": "PostgreSQL storage initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.771767", "seconds": 0.771767}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 116, "message": "PostgreSQL storage initialized successfully", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:46:37.945547-03:00", "timestamp": 1762829197.945547}}}
INFO:     Application startup complete.
[ENRICHMENT STATUS] Fetching for user_id: 48bb3e53-bfca-4298-bab5-1627ca216739
INFO:     127.0.0.1:61494 - "GET /api/auth/me?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61493 - "GET /api/persona/enrichment-status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
{"text": "Fetching persona for user_id: {user_id}\n", "record": {"elapsed": {"repr": "0:00:34.460512", "seconds": 34.460512}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "get_current_persona", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 3675, "message": "Fetching persona for user_id: {user_id}", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:47:11.634292-03:00", "timestamp": 1762829231.634292}}}
[DEBUG] Getting experts, category filter: None
INFO:     127.0.0.1:61493 - "GET /api/persona/current?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61494 - "GET /api/onboarding/status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEDUP] SEED experts: 18, DB experts: 1, Unique DB: 1
INFO:     127.0.0.1:61496 - "GET /api/experts HTTP/1.1" 200 OK
INFO:     127.0.0.1:61494 - "GET /api/invites/my-codes?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61493 - "GET /api/audit/logs?user_id=48bb3e53-bfca-4298-bab5-1627ca216739&limit=50&offset=0 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 390, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 289, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 790, in get_audit_logs
    logs = await storage.get_audit_logs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/storage.py", line 1592, in get_audit_logs
    rows = await conn.fetch(query, *params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 690, in fetch
    return await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1864, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1961, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 2012, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column "action" does not exist
INFO:     127.0.0.1:61521 - "POST /api/audit/log HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 390, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 289, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 771, in create_audit_log
    log_id = await storage.create_audit_log(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/storage.py", line 1536, in create_audit_log
    await conn.execute("""
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 352, in execute
    _, status, _ = await self._execute(
                   ^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1864, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1961, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 2012, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column "metadata" of relation "audit_logs" does not exist
INFO:     127.0.0.1:61543 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:61545 - "POST /api/audit/log HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 390, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 289, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 771, in create_audit_log
    log_id = await storage.create_audit_log(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/storage.py", line 1536, in create_audit_log
    await conn.execute("""
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 352, in execute
    _, status, _ = await self._execute(
                   ^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1864, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1961, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 2012, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column "metadata" of relation "audit_logs" does not exist
INFO:     127.0.0.1:61561 - "POST /api/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:61563 - "POST /api/audit/log HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 390, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 289, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 771, in create_audit_log
    log_id = await storage.create_audit_log(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/storage.py", line 1536, in create_audit_log
    await conn.execute("""
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 352, in execute
    _, status, _ = await self._execute(
                   ^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1864, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1961, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 2012, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column "metadata" of relation "audit_logs" does not exist
INFO:     127.0.0.1:61561 - "GET /api/auth/me?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61577 - "GET /api/audit/logs?user_id=48bb3e53-bfca-4298-bab5-1627ca216739&limit=50&offset=0 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 390, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 289, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 790, in get_audit_logs
    logs = await storage.get_audit_logs(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/storage.py", line 1592, in get_audit_logs
    rows = await conn.fetch(query, *params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 690, in fetch
    return await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1864, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 1961, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 2012, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column "action" does not exist
WARNING:  WatchFiles detected changes in 'storage.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
{"text": "Closing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:07:47.282919", "seconds": 467.282919}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Closing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:24.456699-03:00", "timestamp": 1762829664.456699}}}
[PostgresStorage] Connection pool closed
{"text": "PostgreSQL storage closed successfully\n", "record": {"elapsed": {"repr": "0:07:47.299835", "seconds": 467.299835}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 129, "message": "PostgreSQL storage closed successfully", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:24.473615-03:00", "timestamp": 1762829664.473615}}}
{"text": "Closing cache manager\n", "record": {"elapsed": {"repr": "0:07:47.300221", "seconds": 467.300221}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 132, "message": "Closing cache manager", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:24.474001-03:00", "timestamp": 1762829664.474001}}}
{"text": "Cache manager closed successfully\n", "record": {"elapsed": {"repr": "0:07:47.301525", "seconds": 467.301525}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 134, "message": "Cache manager closed successfully", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:24.475305-03:00", "timestamp": 1762829664.475305}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:07:47.301791", "seconds": 467.301791}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 137, "message": "Closing database connection pool", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:24.475571-03:00", "timestamp": 1762829664.475571}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:07:47.302356", "seconds": 467.302356}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Closing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:24.476136-03:00", "timestamp": 1762829664.476136}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:07:47.303805", "seconds": 467.303805}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 98, "message": "Database pool closed successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:24.477585-03:00", "timestamp": 1762829664.477585}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:07:47.304096", "seconds": 467.304096}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 139, "message": "Database pool closed successfully", "module": "main", "name": "main", "process": {"id": 19524, "name": "SpawnProcess-3"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:24.477876-03:00", "timestamp": 1762829664.477876}}}
INFO:     Application shutdown complete.
INFO:     Finished server process [19524]

======================================================================
üîç VALIDANDO VARI√ÅVEIS DE AMBIENTE...
======================================================================

‚úÖ Vari√°veis obrigat√≥rias: OK

‚ÑπÔ∏è  Vari√°veis opcionais ausentes (funcionalidades limitadas):
  ‚ÑπÔ∏è  UNSPLASH_ACCESS_KEY: Unsplash API for avatars (optional, will be skipped)
  ‚ÑπÔ∏è  REDIS_URL: Redis connection string (optional, will be skipped)
  ‚ÑπÔ∏è  SENTRY_DSN: Sentry error tracking DSN (optional, will be skipped)

‚öôÔ∏è  Configura√ß√µes: Valores padr√£o aplicados

======================================================================
‚úÖ VALIDA√á√ÉO CONCLU√çDA COM SUCESSO!
======================================================================
  üåç Ambiente: development
  üóÑÔ∏è  Database: ep-steep-wildflower-acg1m9zm-pooler.sa-east-1.aws.neon.tech
  ü§ñ Anthropic API: Configurada
  üîê Session Secret: ‚úì
======================================================================

{"text": "Logger initialized\n", "record": {"elapsed": {"repr": "0:00:00.011873", "seconds": 0.011873}, "exception": null, "extra": {"environment": "development", "level": "INFO", "format": "json", "production": false}, "file": {"name": "logger.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/logger.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 159, "message": "Logger initialized", "module": "logger", "name": "logger", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.018309-03:00", "timestamp": 1762829665.018309}}}
INFO:     Started server process [19809]
INFO:     Waiting for application startup.
[CloneRegistry] Discovering seed clones...
[CloneRegistry] Registered SEED clone: Al Ries (5 stories)
[CloneRegistry] Registered SEED clone: Ann Handley (5 stories)
[CloneRegistry] Registered SEED clone: Claude Hopkins (5 stories)
[CloneRegistry] Registered SEED clone: Dan Kennedy (5 stories)
[CloneRegistry] Registered SEED clone: Daniel Kahneman (5 stories)
[CloneRegistry] Registered SEED clone: David Aaker (5 stories)
[CloneRegistry] Registered SEED clone: David Ogilvy (5 stories)
[CloneRegistry] Registered SEED clone: Donald Miller (5 stories)
[CloneRegistry] Registered SEED clone: Drayton Bird (5 stories)
[CloneRegistry] Registered SEED clone: Eugene Schwartz (5 stories)
[CloneRegistry] Registered SEED clone: Gary Vaynerchuk (5 stories)
[CloneRegistry] Registered SEED clone: Jay Abraham (5 stories)
[CloneRegistry] Registered SEED clone: Jay Levinson (5 stories)
[CloneRegistry] Registered SEED clone: Neil Patel (5 stories)
[CloneRegistry] Registered SEED clone: Philip Kotler (5 stories)
[CloneRegistry] Registered SEED clone: Robert Cialdini (5 stories)
[CloneRegistry] Registered SEED clone: Seth Godin (5 stories)
[CloneRegistry] Registered SEED clone: Simon Sinek (5 stories)
[CloneRegistry] Discovering custom auto-generated clones...
[CORS] Allowed origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5000', 'http://127.0.0.1:5000']
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.269007", "seconds": 0.269007}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 104, "message": "Initializing database connection pool", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.275443-03:00", "timestamp": 1762829665.275443}}}
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.269204", "seconds": 0.269204}, "exception": null, "extra": {"min_size": 5, "max_size": 20, "max_queries": 5000}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 52, "message": "Initializing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.275640-03:00", "timestamp": 1762829665.27564}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.538718", "seconds": 0.538718}, "exception": null, "extra": {"min_size": 5, "max_size": 20}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Database pool initialized successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.545154-03:00", "timestamp": 1762829665.545154}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.538953", "seconds": 0.538953}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 106, "message": "Database pool initialized successfully", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.545389-03:00", "timestamp": 1762829665.545389}}}
{"text": "Initializing cache manager\n", "record": {"elapsed": {"repr": "0:00:00.539062", "seconds": 0.539062}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 109, "message": "Initializing cache manager", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.545498-03:00", "timestamp": 1762829665.545498}}}
{"text": "Using in-memory cache (Redis not configured)\n", "record": {"elapsed": {"repr": "0:00:00.539169", "seconds": 0.539169}, "exception": null, "extra": {}, "file": {"name": "cache.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/cache.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Using in-memory cache (Redis not configured)", "module": "cache", "name": "cache", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.545605-03:00", "timestamp": 1762829665.545605}}}
{"text": "Cache manager initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.539257", "seconds": 0.539257}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Cache manager initialized successfully", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.545693-03:00", "timestamp": 1762829665.545693}}}
{"text": "Initializing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:00.539334", "seconds": 0.539334}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 114, "message": "Initializing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.545770-03:00", "timestamp": 1762829665.54577}}}
[PostgresStorage] Connection pool initialized
[Startup] Seed experts loaded from CloneRegistry. PostgreSQL ready for custom experts.
{"text": "PostgreSQL storage initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.726670", "seconds": 0.72667}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 116, "message": "PostgreSQL storage initialized successfully", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:25.733106-03:00", "timestamp": 1762829665.733106}}}
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'storage.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
{"text": "Closing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:25.087752", "seconds": 25.087752}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Closing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.094188-03:00", "timestamp": 1762829690.094188}}}
[PostgresStorage] Connection pool closed
{"text": "PostgreSQL storage closed successfully\n", "record": {"elapsed": {"repr": "0:00:25.102961", "seconds": 25.102961}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 129, "message": "PostgreSQL storage closed successfully", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.109397-03:00", "timestamp": 1762829690.109397}}}
{"text": "Closing cache manager\n", "record": {"elapsed": {"repr": "0:00:25.103194", "seconds": 25.103194}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 132, "message": "Closing cache manager", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.109630-03:00", "timestamp": 1762829690.10963}}}
{"text": "Cache manager closed successfully\n", "record": {"elapsed": {"repr": "0:00:25.103317", "seconds": 25.103317}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 134, "message": "Cache manager closed successfully", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.109753-03:00", "timestamp": 1762829690.109753}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:00:25.103398", "seconds": 25.103398}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 137, "message": "Closing database connection pool", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.109834-03:00", "timestamp": 1762829690.109834}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:00:25.103480", "seconds": 25.10348}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Closing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.109916-03:00", "timestamp": 1762829690.109916}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:00:25.119149", "seconds": 25.119149}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 98, "message": "Database pool closed successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.125585-03:00", "timestamp": 1762829690.125585}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:00:25.119384", "seconds": 25.119384}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 139, "message": "Database pool closed successfully", "module": "main", "name": "main", "process": {"id": 19809, "name": "SpawnProcess-4"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.125820-03:00", "timestamp": 1762829690.12582}}}
INFO:     Application shutdown complete.
INFO:     Finished server process [19809]

======================================================================
üîç VALIDANDO VARI√ÅVEIS DE AMBIENTE...
======================================================================

‚úÖ Vari√°veis obrigat√≥rias: OK

‚ÑπÔ∏è  Vari√°veis opcionais ausentes (funcionalidades limitadas):
  ‚ÑπÔ∏è  UNSPLASH_ACCESS_KEY: Unsplash API for avatars (optional, will be skipped)
  ‚ÑπÔ∏è  REDIS_URL: Redis connection string (optional, will be skipped)
  ‚ÑπÔ∏è  SENTRY_DSN: Sentry error tracking DSN (optional, will be skipped)

‚öôÔ∏è  Configura√ß√µes: Valores padr√£o aplicados

======================================================================
‚úÖ VALIDA√á√ÉO CONCLU√çDA COM SUCESSO!
======================================================================
  üåç Ambiente: development
  üóÑÔ∏è  Database: ep-steep-wildflower-acg1m9zm-pooler.sa-east-1.aws.neon.tech
  ü§ñ Anthropic API: Configurada
  üîê Session Secret: ‚úì
======================================================================

{"text": "Logger initialized\n", "record": {"elapsed": {"repr": "0:00:00.012497", "seconds": 0.012497}, "exception": null, "extra": {"environment": "development", "level": "INFO", "format": "json", "production": false}, "file": {"name": "logger.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/logger.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 159, "message": "Logger initialized", "module": "logger", "name": "logger", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.567379-03:00", "timestamp": 1762829690.567379}}}
INFO:     Started server process [19825]
INFO:     Waiting for application startup.
[CloneRegistry] Discovering seed clones...
[CloneRegistry] Registered SEED clone: Al Ries (5 stories)
[CloneRegistry] Registered SEED clone: Ann Handley (5 stories)
[CloneRegistry] Registered SEED clone: Claude Hopkins (5 stories)
[CloneRegistry] Registered SEED clone: Dan Kennedy (5 stories)
[CloneRegistry] Registered SEED clone: Daniel Kahneman (5 stories)
[CloneRegistry] Registered SEED clone: David Aaker (5 stories)
[CloneRegistry] Registered SEED clone: David Ogilvy (5 stories)
[CloneRegistry] Registered SEED clone: Donald Miller (5 stories)
[CloneRegistry] Registered SEED clone: Drayton Bird (5 stories)
[CloneRegistry] Registered SEED clone: Eugene Schwartz (5 stories)
[CloneRegistry] Registered SEED clone: Gary Vaynerchuk (5 stories)
[CloneRegistry] Registered SEED clone: Jay Abraham (5 stories)
[CloneRegistry] Registered SEED clone: Jay Levinson (5 stories)
[CloneRegistry] Registered SEED clone: Neil Patel (5 stories)
[CloneRegistry] Registered SEED clone: Philip Kotler (5 stories)
[CloneRegistry] Registered SEED clone: Robert Cialdini (5 stories)
[CloneRegistry] Registered SEED clone: Seth Godin (5 stories)
[CloneRegistry] Registered SEED clone: Simon Sinek (5 stories)
[CloneRegistry] Discovering custom auto-generated clones...
[CORS] Allowed origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5000', 'http://127.0.0.1:5000']
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.240583", "seconds": 0.240583}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 104, "message": "Initializing database connection pool", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.795465-03:00", "timestamp": 1762829690.795465}}}
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.240774", "seconds": 0.240774}, "exception": null, "extra": {"min_size": 5, "max_size": 20, "max_queries": 5000}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 52, "message": "Initializing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:50.795656-03:00", "timestamp": 1762829690.795656}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.505129", "seconds": 0.505129}, "exception": null, "extra": {"min_size": 5, "max_size": 20}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Database pool initialized successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:51.060011-03:00", "timestamp": 1762829691.060011}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.505345", "seconds": 0.505345}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 106, "message": "Database pool initialized successfully", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:51.060227-03:00", "timestamp": 1762829691.060227}}}
{"text": "Initializing cache manager\n", "record": {"elapsed": {"repr": "0:00:00.505448", "seconds": 0.505448}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 109, "message": "Initializing cache manager", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:51.060330-03:00", "timestamp": 1762829691.06033}}}
{"text": "Using in-memory cache (Redis not configured)\n", "record": {"elapsed": {"repr": "0:00:00.505544", "seconds": 0.505544}, "exception": null, "extra": {}, "file": {"name": "cache.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/cache.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Using in-memory cache (Redis not configured)", "module": "cache", "name": "cache", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:51.060426-03:00", "timestamp": 1762829691.060426}}}
{"text": "Cache manager initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.505624", "seconds": 0.505624}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Cache manager initialized successfully", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:51.060506-03:00", "timestamp": 1762829691.060506}}}
{"text": "Initializing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:00.505697", "seconds": 0.505697}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 114, "message": "Initializing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:51.060579-03:00", "timestamp": 1762829691.060579}}}
[PostgresStorage] Connection pool initialized
[Startup] Seed experts loaded from CloneRegistry. PostgreSQL ready for custom experts.
{"text": "PostgreSQL storage initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.681694", "seconds": 0.681694}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 116, "message": "PostgreSQL storage initialized successfully", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:54:51.236576-03:00", "timestamp": 1762829691.236576}}}
INFO:     Application startup complete.
INFO:     127.0.0.1:61974 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61976 - "GET /api/auth/me?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61978 - "GET /api/audit/logs?user_id=48bb3e53-bfca-4298-bab5-1627ca216739&limit=5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61985 - "GET /api/superadmin/metrics?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 380, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/dependencies/utils.py", line 673, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 558, in require_superadmin
    conn = await asyncpg.connect(os.environ.get("DATABASE_URL"), statement_cache_size=0)
                 ^^^^^^^
NameError: name 'asyncpg' is not defined. Did you mean: 'asyncio'?
INFO:     127.0.0.1:61987 - "GET /api/superadmin/personas?user_id=48bb3e53-bfca-4298-bab5-1627ca216739&limit=5 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/routing.py", line 380, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Library/Python/3.12/lib/python/site-packages/fastapi/dependencies/utils.py", line 673, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py", line 558, in require_superadmin
    conn = await asyncpg.connect(os.environ.get("DATABASE_URL"), statement_cache_size=0)
                 ^^^^^^^
NameError: name 'asyncpg' is not defined. Did you mean: 'asyncio'?
[ENRICHMENT STATUS] Fetching for user_id: 48bb3e53-bfca-4298-bab5-1627ca216739
INFO:     127.0.0.1:62014 - "GET /api/auth/me?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62013 - "GET /api/persona/enrichment-status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
{"text": "Fetching persona for user_id: {user_id}\n", "record": {"elapsed": {"repr": "0:00:55.520170", "seconds": 55.52017}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "get_current_persona", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 3675, "message": "Fetching persona for user_id: {user_id}", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:55:46.075052-03:00", "timestamp": 1762829746.075052}}}
INFO:     127.0.0.1:62013 - "GET /api/audit/logs?user_id=48bb3e53-bfca-4298-bab5-1627ca216739&limit=50&offset=0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62014 - "GET /api/persona/current?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62016 - "GET /api/invites/my-codes?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
{"text": "Closing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:01:20.688119", "seconds": 80.688119}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Closing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:11.243001-03:00", "timestamp": 1762829771.243001}}}
[PostgresStorage] Connection pool closed
{"text": "PostgreSQL storage closed successfully\n", "record": {"elapsed": {"repr": "0:01:20.726206", "seconds": 80.726206}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 129, "message": "PostgreSQL storage closed successfully", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:11.281088-03:00", "timestamp": 1762829771.281088}}}
{"text": "Closing cache manager\n", "record": {"elapsed": {"repr": "0:01:20.726837", "seconds": 80.726837}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 132, "message": "Closing cache manager", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:11.281719-03:00", "timestamp": 1762829771.281719}}}
{"text": "Cache manager closed successfully\n", "record": {"elapsed": {"repr": "0:01:20.727431", "seconds": 80.727431}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 134, "message": "Cache manager closed successfully", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:11.282313-03:00", "timestamp": 1762829771.282313}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:01:20.727855", "seconds": 80.727855}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 137, "message": "Closing database connection pool", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:11.282737-03:00", "timestamp": 1762829771.282737}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:01:20.728396", "seconds": 80.728396}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Closing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:11.283278-03:00", "timestamp": 1762829771.283278}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:01:20.743744", "seconds": 80.743744}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 98, "message": "Database pool closed successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:11.298626-03:00", "timestamp": 1762829771.298626}}}
INFO:     Application shutdown complete.
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:01:20.743955", "seconds": 80.743955}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 139, "message": "Database pool closed successfully", "module": "main", "name": "main", "process": {"id": 19825, "name": "SpawnProcess-5"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:11.298837-03:00", "timestamp": 1762829771.298837}}}
INFO:     Finished server process [19825]

======================================================================
üîç VALIDANDO VARI√ÅVEIS DE AMBIENTE...
======================================================================

‚úÖ Vari√°veis obrigat√≥rias: OK

‚ÑπÔ∏è  Vari√°veis opcionais ausentes (funcionalidades limitadas):
  ‚ÑπÔ∏è  UNSPLASH_ACCESS_KEY: Unsplash API for avatars (optional, will be skipped)
  ‚ÑπÔ∏è  REDIS_URL: Redis connection string (optional, will be skipped)
  ‚ÑπÔ∏è  SENTRY_DSN: Sentry error tracking DSN (optional, will be skipped)

‚öôÔ∏è  Configura√ß√µes: Valores padr√£o aplicados

======================================================================
‚úÖ VALIDA√á√ÉO CONCLU√çDA COM SUCESSO!
======================================================================
  üåç Ambiente: development
  üóÑÔ∏è  Database: ep-steep-wildflower-acg1m9zm-pooler.sa-east-1.aws.neon.tech
  ü§ñ Anthropic API: Configurada
  üîê Session Secret: ‚úì
======================================================================

{"text": "Logger initialized\n", "record": {"elapsed": {"repr": "0:00:00.011700", "seconds": 0.0117}, "exception": null, "extra": {"environment": "development", "level": "INFO", "format": "json", "production": false}, "file": {"name": "logger.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/logger.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 159, "message": "Logger initialized", "module": "logger", "name": "logger", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.002164-03:00", "timestamp": 1762829772.002164}}}
INFO:     Started server process [19998]
INFO:     Waiting for application startup.
[CloneRegistry] Discovering seed clones...
[CloneRegistry] Registered SEED clone: Al Ries (5 stories)
[CloneRegistry] Registered SEED clone: Ann Handley (5 stories)
[CloneRegistry] Registered SEED clone: Claude Hopkins (5 stories)
[CloneRegistry] Registered SEED clone: Dan Kennedy (5 stories)
[CloneRegistry] Registered SEED clone: Daniel Kahneman (5 stories)
[CloneRegistry] Registered SEED clone: David Aaker (5 stories)
[CloneRegistry] Registered SEED clone: David Ogilvy (5 stories)
[CloneRegistry] Registered SEED clone: Donald Miller (5 stories)
[CloneRegistry] Registered SEED clone: Drayton Bird (5 stories)
[CloneRegistry] Registered SEED clone: Eugene Schwartz (5 stories)
[CloneRegistry] Registered SEED clone: Gary Vaynerchuk (5 stories)
[CloneRegistry] Registered SEED clone: Jay Abraham (5 stories)
[CloneRegistry] Registered SEED clone: Jay Levinson (5 stories)
[CloneRegistry] Registered SEED clone: Neil Patel (5 stories)
[CloneRegistry] Registered SEED clone: Philip Kotler (5 stories)
[CloneRegistry] Registered SEED clone: Robert Cialdini (5 stories)
[CloneRegistry] Registered SEED clone: Seth Godin (5 stories)
[CloneRegistry] Registered SEED clone: Simon Sinek (5 stories)
[CloneRegistry] Discovering custom auto-generated clones...
[CORS] Allowed origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5000', 'http://127.0.0.1:5000']
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.268933", "seconds": 0.268933}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 104, "message": "Initializing database connection pool", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.259397-03:00", "timestamp": 1762829772.259397}}}
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.269223", "seconds": 0.269223}, "exception": null, "extra": {"min_size": 5, "max_size": 20, "max_queries": 5000}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 52, "message": "Initializing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.259687-03:00", "timestamp": 1762829772.259687}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.627555", "seconds": 0.627555}, "exception": null, "extra": {"min_size": 5, "max_size": 20}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Database pool initialized successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.618019-03:00", "timestamp": 1762829772.618019}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.627874", "seconds": 0.627874}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 106, "message": "Database pool initialized successfully", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.618338-03:00", "timestamp": 1762829772.618338}}}
{"text": "Initializing cache manager\n", "record": {"elapsed": {"repr": "0:00:00.627999", "seconds": 0.627999}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 109, "message": "Initializing cache manager", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.618463-03:00", "timestamp": 1762829772.618463}}}
{"text": "Using in-memory cache (Redis not configured)\n", "record": {"elapsed": {"repr": "0:00:00.628114", "seconds": 0.628114}, "exception": null, "extra": {}, "file": {"name": "cache.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/cache.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Using in-memory cache (Redis not configured)", "module": "cache", "name": "cache", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.618578-03:00", "timestamp": 1762829772.618578}}}
{"text": "Cache manager initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.628202", "seconds": 0.628202}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 111, "message": "Cache manager initialized successfully", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.618666-03:00", "timestamp": 1762829772.618666}}}
{"text": "Initializing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:00.628279", "seconds": 0.628279}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 114, "message": "Initializing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.618743-03:00", "timestamp": 1762829772.618743}}}
[PostgresStorage] Connection pool initialized
{"text": "PostgreSQL storage initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.799746", "seconds": 0.799746}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 116, "message": "PostgreSQL storage initialized successfully", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:12.790210-03:00", "timestamp": 1762829772.79021}}}
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
[Startup] Seed experts loaded from CloneRegistry. PostgreSQL ready for custom experts.
{"text": "Closing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:27.338143", "seconds": 27.338143}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 127, "message": "Closing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:39.328607-03:00", "timestamp": 1762829799.328607}}}
[PostgresStorage] Connection pool closed
{"text": "PostgreSQL storage closed successfully\n", "record": {"elapsed": {"repr": "0:00:27.361727", "seconds": 27.361727}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 129, "message": "PostgreSQL storage closed successfully", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:39.352191-03:00", "timestamp": 1762829799.352191}}}
{"text": "Closing cache manager\n", "record": {"elapsed": {"repr": "0:00:27.372655", "seconds": 27.372655}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 132, "message": "Closing cache manager", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:39.363119-03:00", "timestamp": 1762829799.363119}}}
{"text": "Cache manager closed successfully\n", "record": {"elapsed": {"repr": "0:00:27.373732", "seconds": 27.373732}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 134, "message": "Cache manager closed successfully", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:39.364196-03:00", "timestamp": 1762829799.364196}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:00:27.374041", "seconds": 27.374041}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 137, "message": "Closing database connection pool", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:39.364505-03:00", "timestamp": 1762829799.364505}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:00:27.374420", "seconds": 27.37442}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Closing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:39.364884-03:00", "timestamp": 1762829799.364884}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:00:27.402975", "seconds": 27.402975}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 98, "message": "Database pool closed successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:39.393439-03:00", "timestamp": 1762829799.393439}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:00:27.407162", "seconds": 27.407162}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 139, "message": "Database pool closed successfully", "module": "main", "name": "main", "process": {"id": 19998, "name": "SpawnProcess-6"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:39.397626-03:00", "timestamp": 1762829799.397626}}}
INFO:     Application shutdown complete.
INFO:     Finished server process [19998]

======================================================================
üîç VALIDANDO VARI√ÅVEIS DE AMBIENTE...
======================================================================

‚úÖ Vari√°veis obrigat√≥rias: OK

‚ÑπÔ∏è  Vari√°veis opcionais ausentes (funcionalidades limitadas):
  ‚ÑπÔ∏è  UNSPLASH_ACCESS_KEY: Unsplash API for avatars (optional, will be skipped)
  ‚ÑπÔ∏è  REDIS_URL: Redis connection string (optional, will be skipped)
  ‚ÑπÔ∏è  SENTRY_DSN: Sentry error tracking DSN (optional, will be skipped)

‚öôÔ∏è  Configura√ß√µes: Valores padr√£o aplicados

======================================================================
‚úÖ VALIDA√á√ÉO CONCLU√çDA COM SUCESSO!
======================================================================
  üåç Ambiente: development
  üóÑÔ∏è  Database: ep-steep-wildflower-acg1m9zm-pooler.sa-east-1.aws.neon.tech
  ü§ñ Anthropic API: Configurada
  üîê Session Secret: ‚úì
======================================================================

{"text": "Logger initialized\n", "record": {"elapsed": {"repr": "0:00:00.011669", "seconds": 0.011669}, "exception": null, "extra": {"environment": "development", "level": "INFO", "format": "json", "production": false}, "file": {"name": "logger.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/logger.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 159, "message": "Logger initialized", "module": "logger", "name": "logger", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:39.947217-03:00", "timestamp": 1762829799.947217}}}
INFO:     Started server process [20010]
INFO:     Waiting for application startup.
[CloneRegistry] Discovering seed clones...
[CloneRegistry] Registered SEED clone: Al Ries (5 stories)
[CloneRegistry] Registered SEED clone: Ann Handley (5 stories)
[CloneRegistry] Registered SEED clone: Claude Hopkins (5 stories)
[CloneRegistry] Registered SEED clone: Dan Kennedy (5 stories)
[CloneRegistry] Registered SEED clone: Daniel Kahneman (5 stories)
[CloneRegistry] Registered SEED clone: David Aaker (5 stories)
[CloneRegistry] Registered SEED clone: David Ogilvy (5 stories)
[CloneRegistry] Registered SEED clone: Donald Miller (5 stories)
[CloneRegistry] Registered SEED clone: Drayton Bird (5 stories)
[CloneRegistry] Registered SEED clone: Eugene Schwartz (5 stories)
[CloneRegistry] Registered SEED clone: Gary Vaynerchuk (5 stories)
[CloneRegistry] Registered SEED clone: Jay Abraham (5 stories)
[CloneRegistry] Registered SEED clone: Jay Levinson (5 stories)
[CloneRegistry] Registered SEED clone: Neil Patel (5 stories)
[CloneRegistry] Registered SEED clone: Philip Kotler (5 stories)
[CloneRegistry] Registered SEED clone: Robert Cialdini (5 stories)
[CloneRegistry] Registered SEED clone: Seth Godin (5 stories)
[CloneRegistry] Registered SEED clone: Simon Sinek (5 stories)
[CloneRegistry] Discovering custom auto-generated clones...
[CORS] Allowed origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5000', 'http://127.0.0.1:5000']
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.226447", "seconds": 0.226447}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 105, "message": "Initializing database connection pool", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:40.161995-03:00", "timestamp": 1762829800.161995}}}
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.226751", "seconds": 0.226751}, "exception": null, "extra": {"min_size": 5, "max_size": 20, "max_queries": 5000}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 52, "message": "Initializing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:40.162299-03:00", "timestamp": 1762829800.162299}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.511546", "seconds": 0.511546}, "exception": null, "extra": {"min_size": 5, "max_size": 20}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Database pool initialized successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:40.447094-03:00", "timestamp": 1762829800.447094}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.511800", "seconds": 0.5118}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 107, "message": "Database pool initialized successfully", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:40.447348-03:00", "timestamp": 1762829800.447348}}}
{"text": "Initializing cache manager\n", "record": {"elapsed": {"repr": "0:00:00.511922", "seconds": 0.511922}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 110, "message": "Initializing cache manager", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:40.447470-03:00", "timestamp": 1762829800.44747}}}
{"text": "Using in-memory cache (Redis not configured)\n", "record": {"elapsed": {"repr": "0:00:00.512047", "seconds": 0.512047}, "exception": null, "extra": {}, "file": {"name": "cache.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/cache.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Using in-memory cache (Redis not configured)", "module": "cache", "name": "cache", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:40.447595-03:00", "timestamp": 1762829800.447595}}}
{"text": "Cache manager initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.512143", "seconds": 0.512143}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 112, "message": "Cache manager initialized successfully", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:40.447691-03:00", "timestamp": 1762829800.447691}}}
{"text": "Initializing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:00.512229", "seconds": 0.512229}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 115, "message": "Initializing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:40.447777-03:00", "timestamp": 1762829800.447777}}}
[PostgresStorage] Connection pool initialized
{"text": "PostgreSQL storage initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.827923", "seconds": 0.827923}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 117, "message": "PostgreSQL storage initialized successfully", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:40.763471-03:00", "timestamp": 1762829800.763471}}}
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
[Startup] Seed experts loaded from CloneRegistry. PostgreSQL ready for custom experts.
{"text": "Closing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:02.138808", "seconds": 2.138808}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Closing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.074356-03:00", "timestamp": 1762829802.074356}}}
[PostgresStorage] Connection pool closed
{"text": "PostgreSQL storage closed successfully\n", "record": {"elapsed": {"repr": "0:00:02.151654", "seconds": 2.151654}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 130, "message": "PostgreSQL storage closed successfully", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.087202-03:00", "timestamp": 1762829802.087202}}}
{"text": "Closing cache manager\n", "record": {"elapsed": {"repr": "0:00:02.151991", "seconds": 2.151991}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 133, "message": "Closing cache manager", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.087539-03:00", "timestamp": 1762829802.087539}}}
{"text": "Cache manager closed successfully\n", "record": {"elapsed": {"repr": "0:00:02.152354", "seconds": 2.152354}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 135, "message": "Cache manager closed successfully", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.087902-03:00", "timestamp": 1762829802.087902}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:00:02.152500", "seconds": 2.1525}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 138, "message": "Closing database connection pool", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.088048-03:00", "timestamp": 1762829802.088048}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:00:02.152588", "seconds": 2.152588}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Closing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.088136-03:00", "timestamp": 1762829802.088136}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:00:02.162541", "seconds": 2.162541}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 98, "message": "Database pool closed successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.098089-03:00", "timestamp": 1762829802.098089}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:00:02.162704", "seconds": 2.162704}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 140, "message": "Database pool closed successfully", "module": "main", "name": "main", "process": {"id": 20010, "name": "SpawnProcess-7"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.098252-03:00", "timestamp": 1762829802.098252}}}
INFO:     Application shutdown complete.
INFO:     Finished server process [20010]

======================================================================
üîç VALIDANDO VARI√ÅVEIS DE AMBIENTE...
======================================================================

‚úÖ Vari√°veis obrigat√≥rias: OK

‚ÑπÔ∏è  Vari√°veis opcionais ausentes (funcionalidades limitadas):
  ‚ÑπÔ∏è  UNSPLASH_ACCESS_KEY: Unsplash API for avatars (optional, will be skipped)
  ‚ÑπÔ∏è  REDIS_URL: Redis connection string (optional, will be skipped)
  ‚ÑπÔ∏è  SENTRY_DSN: Sentry error tracking DSN (optional, will be skipped)

‚öôÔ∏è  Configura√ß√µes: Valores padr√£o aplicados

======================================================================
‚úÖ VALIDA√á√ÉO CONCLU√çDA COM SUCESSO!
======================================================================
  üåç Ambiente: development
  üóÑÔ∏è  Database: ep-steep-wildflower-acg1m9zm-pooler.sa-east-1.aws.neon.tech
  ü§ñ Anthropic API: Configurada
  üîê Session Secret: ‚úì
======================================================================

{"text": "Logger initialized\n", "record": {"elapsed": {"repr": "0:00:00.010483", "seconds": 0.010483}, "exception": null, "extra": {"environment": "development", "level": "INFO", "format": "json", "production": false}, "file": {"name": "logger.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/logger.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 159, "message": "Logger initialized", "module": "logger", "name": "logger", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.450789-03:00", "timestamp": 1762829802.450789}}}
INFO:     Started server process [20015]
INFO:     Waiting for application startup.
[CloneRegistry] Discovering seed clones...
[CloneRegistry] Registered SEED clone: Al Ries (5 stories)
[CloneRegistry] Registered SEED clone: Ann Handley (5 stories)
[CloneRegistry] Registered SEED clone: Claude Hopkins (5 stories)
[CloneRegistry] Registered SEED clone: Dan Kennedy (5 stories)
[CloneRegistry] Registered SEED clone: Daniel Kahneman (5 stories)
[CloneRegistry] Registered SEED clone: David Aaker (5 stories)
[CloneRegistry] Registered SEED clone: David Ogilvy (5 stories)
[CloneRegistry] Registered SEED clone: Donald Miller (5 stories)
[CloneRegistry] Registered SEED clone: Drayton Bird (5 stories)
[CloneRegistry] Registered SEED clone: Eugene Schwartz (5 stories)
[CloneRegistry] Registered SEED clone: Gary Vaynerchuk (5 stories)
[CloneRegistry] Registered SEED clone: Jay Abraham (5 stories)
[CloneRegistry] Registered SEED clone: Jay Levinson (5 stories)
[CloneRegistry] Registered SEED clone: Neil Patel (5 stories)
[CloneRegistry] Registered SEED clone: Philip Kotler (5 stories)
[CloneRegistry] Registered SEED clone: Robert Cialdini (5 stories)
[CloneRegistry] Registered SEED clone: Seth Godin (5 stories)
[CloneRegistry] Registered SEED clone: Simon Sinek (5 stories)
[CloneRegistry] Discovering custom auto-generated clones...
[CORS] Allowed origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5000', 'http://127.0.0.1:5000']
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.157126", "seconds": 0.157126}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 105, "message": "Initializing database connection pool", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.597432-03:00", "timestamp": 1762829802.597432}}}
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.157330", "seconds": 0.15733}, "exception": null, "extra": {"min_size": 5, "max_size": 20, "max_queries": 5000}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 52, "message": "Initializing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.597636-03:00", "timestamp": 1762829802.597636}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.399026", "seconds": 0.399026}, "exception": null, "extra": {"min_size": 5, "max_size": 20}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Database pool initialized successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.839332-03:00", "timestamp": 1762829802.839332}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.399261", "seconds": 0.399261}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 107, "message": "Database pool initialized successfully", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.839567-03:00", "timestamp": 1762829802.839567}}}
{"text": "Initializing cache manager\n", "record": {"elapsed": {"repr": "0:00:00.399363", "seconds": 0.399363}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 110, "message": "Initializing cache manager", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.839669-03:00", "timestamp": 1762829802.839669}}}
{"text": "Using in-memory cache (Redis not configured)\n", "record": {"elapsed": {"repr": "0:00:00.399465", "seconds": 0.399465}, "exception": null, "extra": {}, "file": {"name": "cache.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/cache.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Using in-memory cache (Redis not configured)", "module": "cache", "name": "cache", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.839771-03:00", "timestamp": 1762829802.839771}}}
{"text": "Cache manager initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.399547", "seconds": 0.399547}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 112, "message": "Cache manager initialized successfully", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.839853-03:00", "timestamp": 1762829802.839853}}}
{"text": "Initializing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:00.399618", "seconds": 0.399618}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 115, "message": "Initializing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.839924-03:00", "timestamp": 1762829802.839924}}}
[PostgresStorage] Connection pool initialized
[Startup] Seed experts loaded from CloneRegistry. PostgreSQL ready for custom experts.
{"text": "PostgreSQL storage initialized successfully\n", "record": {"elapsed": {"repr": "0:00:00.547111", "seconds": 0.547111}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 117, "message": "PostgreSQL storage initialized successfully", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:56:42.987417-03:00", "timestamp": 1762829802.987417}}}
INFO:     Application startup complete.
INFO:     127.0.0.1:62087 - "GET /api/superadmin/metrics?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 403 Forbidden
{"text": "Fetching persona for user_id: {user_id}\n", "record": {"elapsed": {"repr": "0:00:42.732020", "seconds": 42.73202}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "get_current_persona", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 3676, "message": "Fetching persona for user_id: {user_id}", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:57:25.172326-03:00", "timestamp": 1762829845.172326}}}
INFO:     127.0.0.1:62096 - "GET /api/persona/current?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEBUG] Getting experts, category filter: None
[DEDUP] SEED experts: 18, DB experts: 1, Unique DB: 1
INFO:     127.0.0.1:62098 - "GET /api/experts?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEDUP] SEED experts: 18, DB experts: 1, Unique DB: 1
INFO:     127.0.0.1:62100 - "GET /api/categories HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'main.py', 'storage.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
{"text": "Closing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:03:12.631002", "seconds": 192.631002}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 128, "message": "Closing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:55.071308-03:00", "timestamp": 1762829995.071308}}}
[PostgresStorage] Connection pool closed
{"text": "PostgreSQL storage closed successfully\n", "record": {"elapsed": {"repr": "0:03:12.664695", "seconds": 192.664695}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 130, "message": "PostgreSQL storage closed successfully", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:55.105001-03:00", "timestamp": 1762829995.105001}}}
{"text": "Closing cache manager\n", "record": {"elapsed": {"repr": "0:03:12.665115", "seconds": 192.665115}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 133, "message": "Closing cache manager", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:55.105421-03:00", "timestamp": 1762829995.105421}}}
{"text": "Cache manager closed successfully\n", "record": {"elapsed": {"repr": "0:03:12.665312", "seconds": 192.665312}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 135, "message": "Cache manager closed successfully", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:55.105618-03:00", "timestamp": 1762829995.105618}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:03:12.665408", "seconds": 192.665408}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 138, "message": "Closing database connection pool", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:55.105714-03:00", "timestamp": 1762829995.105714}}}
{"text": "Closing database connection pool\n", "record": {"elapsed": {"repr": "0:03:12.665498", "seconds": 192.665498}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 93, "message": "Closing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:55.105804-03:00", "timestamp": 1762829995.105804}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:03:12.700544", "seconds": 192.700544}, "exception": null, "extra": {}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "close", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 98, "message": "Database pool closed successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:55.140850-03:00", "timestamp": 1762829995.14085}}}
{"text": "Database pool closed successfully\n", "record": {"elapsed": {"repr": "0:03:12.700756", "seconds": 192.700756}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "shutdown_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 140, "message": "Database pool closed successfully", "module": "main", "name": "main", "process": {"id": 20015, "name": "SpawnProcess-8"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:55.141062-03:00", "timestamp": 1762829995.141062}}}
INFO:     Application shutdown complete.
INFO:     Finished server process [20015]

======================================================================
üîç VALIDANDO VARI√ÅVEIS DE AMBIENTE...
======================================================================

‚úÖ Vari√°veis obrigat√≥rias: OK

‚ÑπÔ∏è  Vari√°veis opcionais ausentes (funcionalidades limitadas):
  ‚ÑπÔ∏è  UNSPLASH_ACCESS_KEY: Unsplash API for avatars (optional, will be skipped)
  ‚ÑπÔ∏è  REDIS_URL: Redis connection string (optional, will be skipped)
  ‚ÑπÔ∏è  SENTRY_DSN: Sentry error tracking DSN (optional, will be skipped)

‚öôÔ∏è  Configura√ß√µes: Valores padr√£o aplicados

======================================================================
‚úÖ VALIDA√á√ÉO CONCLU√çDA COM SUCESSO!
======================================================================
  üåç Ambiente: development
  üóÑÔ∏è  Database: ep-steep-wildflower-acg1m9zm-pooler.sa-east-1.aws.neon.tech
  ü§ñ Anthropic API: Configurada
  üîê Session Secret: ‚úì
======================================================================

{"text": "Logger initialized\n", "record": {"elapsed": {"repr": "0:00:00.012100", "seconds": 0.0121}, "exception": null, "extra": {"environment": "development", "level": "INFO", "format": "json", "production": false}, "file": {"name": "logger.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/logger.py"}, "function": "<module>", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 159, "message": "Logger initialized", "module": "logger", "name": "logger", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:55.856073-03:00", "timestamp": 1762829995.856073}}}
INFO:     Started server process [20243]
INFO:     Waiting for application startup.
[CloneRegistry] Discovering seed clones...
[CloneRegistry] Registered SEED clone: Al Ries (5 stories)
[CloneRegistry] Registered SEED clone: Ann Handley (5 stories)
[CloneRegistry] Registered SEED clone: Claude Hopkins (5 stories)
[CloneRegistry] Registered SEED clone: Dan Kennedy (5 stories)
[CloneRegistry] Registered SEED clone: Daniel Kahneman (5 stories)
[CloneRegistry] Registered SEED clone: David Aaker (5 stories)
[CloneRegistry] Registered SEED clone: David Ogilvy (5 stories)
[CloneRegistry] Registered SEED clone: Donald Miller (5 stories)
[CloneRegistry] Registered SEED clone: Drayton Bird (5 stories)
[CloneRegistry] Registered SEED clone: Eugene Schwartz (5 stories)
[CloneRegistry] Registered SEED clone: Gary Vaynerchuk (5 stories)
[CloneRegistry] Registered SEED clone: Jay Abraham (5 stories)
[CloneRegistry] Registered SEED clone: Jay Levinson (5 stories)
[CloneRegistry] Registered SEED clone: Neil Patel (5 stories)
[CloneRegistry] Registered SEED clone: Philip Kotler (5 stories)
[CloneRegistry] Registered SEED clone: Robert Cialdini (5 stories)
[CloneRegistry] Registered SEED clone: Seth Godin (5 stories)
[CloneRegistry] Registered SEED clone: Simon Sinek (5 stories)
[CloneRegistry] Discovering custom auto-generated clones...
[CORS] Allowed origins: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5000', 'http://127.0.0.1:5000']
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.817581", "seconds": 0.817581}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 105, "message": "Initializing database connection pool", "module": "main", "name": "main", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:56.661554-03:00", "timestamp": 1762829996.661554}}}
{"text": "Initializing database connection pool\n", "record": {"elapsed": {"repr": "0:00:00.817995", "seconds": 0.817995}, "exception": null, "extra": {"min_size": 5, "max_size": 20, "max_queries": 5000}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 52, "message": "Initializing database connection pool", "module": "db_pool", "name": "db_pool", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:56.661968-03:00", "timestamp": 1762829996.661968}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:01.053278", "seconds": 1.053278}, "exception": null, "extra": {"min_size": 5, "max_size": 20}, "file": {"name": "db_pool.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/db_pool.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 75, "message": "Database pool initialized successfully", "module": "db_pool", "name": "db_pool", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:56.897251-03:00", "timestamp": 1762829996.897251}}}
{"text": "Database pool initialized successfully\n", "record": {"elapsed": {"repr": "0:00:01.053509", "seconds": 1.053509}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 107, "message": "Database pool initialized successfully", "module": "main", "name": "main", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:56.897482-03:00", "timestamp": 1762829996.897482}}}
{"text": "Initializing cache manager\n", "record": {"elapsed": {"repr": "0:00:01.053618", "seconds": 1.053618}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 110, "message": "Initializing cache manager", "module": "main", "name": "main", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:56.897591-03:00", "timestamp": 1762829996.897591}}}
{"text": "Using in-memory cache (Redis not configured)\n", "record": {"elapsed": {"repr": "0:00:01.053742", "seconds": 1.053742}, "exception": null, "extra": {}, "file": {"name": "cache.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/cache.py"}, "function": "initialize", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 91, "message": "Using in-memory cache (Redis not configured)", "module": "cache", "name": "cache", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:56.897715-03:00", "timestamp": 1762829996.897715}}}
{"text": "Cache manager initialized successfully\n", "record": {"elapsed": {"repr": "0:00:01.053832", "seconds": 1.053832}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 112, "message": "Cache manager initialized successfully", "module": "main", "name": "main", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:56.897805-03:00", "timestamp": 1762829996.897805}}}
{"text": "Initializing PostgreSQL storage\n", "record": {"elapsed": {"repr": "0:00:01.053914", "seconds": 1.053914}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 115, "message": "Initializing PostgreSQL storage", "module": "main", "name": "main", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:56.897887-03:00", "timestamp": 1762829996.897887}}}
[PostgresStorage] Connection pool initialized
[Startup] Seed experts loaded from CloneRegistry. PostgreSQL ready for custom experts.
{"text": "PostgreSQL storage initialized successfully\n", "record": {"elapsed": {"repr": "0:00:01.216094", "seconds": 1.216094}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "startup_event", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 117, "message": "PostgreSQL storage initialized successfully", "module": "main", "name": "main", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-10 23:59:57.060067-03:00", "timestamp": 1762829997.060067}}}
INFO:     Application startup complete.
[ENRICHMENT STATUS] Fetching for user_id: 48bb3e53-bfca-4298-bab5-1627ca216739
INFO:     127.0.0.1:62198 - "GET /api/auth/me?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62199 - "GET /api/persona/enrichment-status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
{"text": "Fetching persona for user_id: {user_id}\n", "record": {"elapsed": {"repr": "0:00:40.986413", "seconds": 40.986413}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "get_current_persona", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 3676, "message": "Fetching persona for user_id: {user_id}", "module": "main", "name": "main", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-11 00:00:36.830386-03:00", "timestamp": 1762830036.830386}}}
INFO:     127.0.0.1:62198 - "GET /api/audit/logs?user_id=48bb3e53-bfca-4298-bab5-1627ca216739&limit=50&offset=0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62199 - "GET /api/invites/my-codes?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62201 - "GET /api/persona/current?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEBUG] Getting experts, category filter: None
INFO:     127.0.0.1:62225 - "GET /api/onboarding/status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEDUP] SEED experts: 18, DB experts: 1, Unique DB: 1
INFO:     127.0.0.1:62223 - "GET /api/experts HTTP/1.1" 200 OK
[ENRICHMENT STATUS] Fetching for user_id: 48bb3e53-bfca-4298-bab5-1627ca216739
INFO:     127.0.0.1:62259 - "GET /api/auth/me?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62260 - "GET /api/persona/enrichment-status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEBUG] Getting experts, category filter: None
{"text": "Fetching persona for user_id: {user_id}\n", "record": {"elapsed": {"repr": "0:01:48.732143", "seconds": 108.732143}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "/Users/gabriellima/Downloads/Andromeda/advisory_replit/python_backend/main.py"}, "function": "get_current_persona", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 3676, "message": "Fetching persona for user_id: {user_id}", "module": "main", "name": "main", "process": {"id": 20243, "name": "SpawnProcess-9"}, "thread": {"id": 8666407104, "name": "MainThread"}, "time": {"repr": "2025-11-11 00:01:44.576116-03:00", "timestamp": 1762830104.576116}}}
INFO:     127.0.0.1:62259 - "GET /api/onboarding/status?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
[DEDUP] SEED experts: 18, DB experts: 1, Unique DB: 1
INFO:     127.0.0.1:62265 - "GET /api/experts HTTP/1.1" 200 OK
INFO:     127.0.0.1:62260 - "GET /api/persona/current?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62259 - "GET /api/audit/logs?user_id=48bb3e53-bfca-4298-bab5-1627ca216739&limit=50&offset=0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62260 - "GET /api/invites/my-codes?user_id=48bb3e53-bfca-4298-bab5-1627ca216739 HTTP/1.1" 200 OK
