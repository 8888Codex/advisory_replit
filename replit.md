# AdvisorIA - Replit Agent Guide

## Overview
AdvisorIA is a premium AI consultancy platform offering expert advice through cognitive clones of 18 specialists across 15 disciplines. It leverages the "Framework EXTRACT de 12 Camadas" (now 20 points) with Anthropic's Claude to create ultra-realistic AI personalities. The platform features a React/TypeScript frontend, an Express.js proxy, and a Python/FastAPI backend with asynchronous AI integration, aiming to provide a specialized multi-category consulting experience. The platform's ambition is to consolidate 450+ years of marketing expertise into an accessible, interactive format, providing specialized, multi-category consulting.

## User Preferences
Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend
- **Framework & Tooling**: React 18 with TypeScript, Vite, Wouter for routing, TanStack Query v5 for server state.
- **UI Component System**: shadcn/ui components on Radix UI, Tailwind CSS for styling, with a professional dark-mode primary aesthetic (Apple-style minimalist design with a neutral palette and single accent coral color).
- **State Management**: TanStack Query for server state, React Context for theme, react-hook-form with Zod for forms.
- **Routing**: Wouter with custom `useURLSearchParam` hook for URL query parameter synchronization.

### Backend (Hybrid Proxy + Python)
- **Express.js Proxy Server (Port 5000)**: TypeScript proxy forwarding `/api` requests to Python backend, handles automatic Python backend startup and serves static frontend in production.
- **Python/FastAPI Backend (Port 5001)**: FastAPI for async API routes, AsyncAnthropic client for non-blocking AI calls.
- **API Endpoints**: Includes endpoints for experts, categories, suggested questions, chat, auto-cloning, user profiles, insights, and persona management (CRUD for `personas` table).
- **Storage Layer**: In-memory Python storage (MemStorage) using Pydantic models for Expert, Conversation, and Message entities.

### AI Integration - Cognitive Cloning
- **Framework EXTRACT de 20 Pontos**: Each specialist uses a 20-point cognitive fidelity framework for ultra-realistic personalities, covering identity, experiences (story banks), reasoning patterns, terminology, axioms, contexts, techniques, limitations, meta-awareness, quotes, real cases, controversial takes, behavioral triggers, iconic callbacks, and trigger reactions.
- **Implementation Architecture**:
    - **Rich Python Classes**: Each clone is a class inheriting from `ExpertCloneBase` (e.g., `python_backend/clones/{name}.py`).
    - **CloneRegistry**: Auto-discovery system dynamically loads all clones from the `clones/` directory.
    - **LegendAgentFactory Integration**: Loads rich clones first, falling back to legacy text prompts if a rich clone is not found.
    - **Validation**: Minimum requirements (e.g., 3 story banks, 3 iconic callbacks, 5 triggers) are enforced.
    - **Claude API**: AsyncAnthropic (claude-sonnet-4-20250514) processes dynamic system prompts generated by `get_system_prompt()`.
- **Specialists**: 18 specialists with cross-referencing capabilities and Socratic questioning for diagnostic interactions.

### Key Architectural Decisions
- **Monorepo Structure**: `/client` (React), `/server` (Express), `/python_backend` (FastAPI), and `/shared` (TypeScript types).
- **Data Flow**: User interaction -> React UI -> TanStack Query -> Express proxy -> FastAPI -> Storage/AsyncAnthropic -> FastAPI -> Express -> React.
- **Development Workflow**: `npm run dev` starts Express, which spawns the auto-reloading Python backend.
- **UX/UI Decisions**: Apple-style minimalist design with a neutral color palette (95% grays, 1 accent coral), subtle animations (200-300ms, cubic-bezier), `font-semibold` for headings, and standardized rounded-2xl corners.
- **Multi-Category Navigation System**: 15 distinct categories with consistent neutral iconography and filtering capabilities.
- **Personalization System**: Expert recommendations based on user profiles, contextual AI prompt enrichment, Perplexity-powered suggested questions, business insights, and smart filters.

## External Dependencies

- **Anthropic Claude API**: AI model interactions and cognitive cloning.
- **Perplexity API**: Research for auto-cloning feature and content generation.
- **React**: Frontend library.
- **Vite**: Build tool.
- **Wouter**: Client-side router.
- **TanStack Query**: Server state management.
- **shadcn/ui & Radix UI**: UI component libraries.
- **Tailwind CSS**: Styling framework.
- **Express.js**: Proxy server.
- **FastAPI**: Python backend framework.
- **AsyncAnthropic**: Asynchronous Python client for Anthropic API.
- **Uvicorn**: ASGI server for FastAPI.
- **Pydantic**: Data validation for Python models.
- **Zod**: Schema declaration and validation for TypeScript.
- **Framer Motion**: Animation library for React.
- **PostgreSQL**: Database for storing persona data.